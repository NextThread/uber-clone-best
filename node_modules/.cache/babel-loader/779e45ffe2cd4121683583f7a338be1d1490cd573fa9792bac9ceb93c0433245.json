{"ast":null,"code":"import _regeneratorRuntime from\"/Users/binarybeast/uber-clone/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/binarybeast/uber-clone/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import React,{useEffect}from\"react\";import{useParams}from\"react-router-dom\";import{useMediaPredicate}from'react-media-hook';import axios from\"axios\";import{GoogleMap,useJsApiLoader,Marker}from'@react-google-maps/api';import{mapStyle}from\"../../Component/map/mapStyle\";import{GOOGLE_API_KEY}from\"../../Component/const/api\";import InfoComponent from\"../../Component/map/infoComponent\";import{updatePickup,updatePickupDisable,updatePickupCoordinates}from\"../../Store/slice\";import{useAppDispatch,useAppSelector}from\"../../Store/hooks\";import FormCard from\"../../Component/formCard\";import Header from\"../../Component/header\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Pick=function Pick(){var dispatch=useAppDispatch();var _useParams=useParams(),origin=_useParams.origin;var myOrigin=origin.split(\",\")[0];var pickUpCoordinate=useAppSelector(function(state){return state.root.pickup.coordinates;});var _useJsApiLoader=useJsApiLoader({googleMapsApiKey:\"\".concat(GOOGLE_API_KEY)}),isLoaded=_useJsApiLoader.isLoaded;useEffect(function(){var mount=true;if(mount){dispatch(updatePickup(myOrigin));dispatch(updatePickupDisable(true));var getCoordinate=function getCoordinate(address){axios(\"https://maps.googleapis.com/maps/api/geocode/json?address=\".concat(address,\"&key=\").concat(GOOGLE_API_KEY),{method:\"GET\",headers:{\"Content-Type\":\"application/json\"}}).then(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(res){var result,position;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return res.data;case 3:result=_context.sent;_context.next=6;return result.results[0].geometry.location;case 6:position=_context.sent;dispatch(updatePickupCoordinates(position));_context.next=13;break;case 10:_context.prev=10;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 13:case\"end\":return _context.stop();}},_callee,null,[[0,10]]);}));return function(_x){return _ref.apply(this,arguments);};}());};getCoordinate(origin);}return function(){dispatch(updatePickup(\"\"));dispatch(updatePickupDisable(false));mount=false;};},[dispatch,origin,myOrigin]);var biggerScreen=useMediaPredicate('(min-width: 640px)');var lat=pickUpCoordinate.lat,lng=pickUpCoordinate.lng;if(!isLoaded){return/*#__PURE__*/_jsx(\"div\",{});}return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsx(\"div\",{className:\" bg-gray-300  h-[45vh] sm:h-screen w-full\",children:/*#__PURE__*/_jsxs(GoogleMap,{id:\"map\",mapContainerStyle:{width:'100%',height:'100%'},center:pickUpCoordinate,zoom:14,options:{streetViewControl:false,fullscreenControl:false,mapTypeControl:false,styles:mapStyle,clickableIcons:false,zoomControl:biggerScreen?true:false},children:[/*#__PURE__*/_jsx(Marker,{clickable:false,position:pickUpCoordinate,options:{icon:{url:'https://www.picng.com/upload/vinyl/png_vinyl_35563.png',scaledSize:new google.maps.Size(18,18)}}}),/*#__PURE__*/_jsx(InfoComponent,{center:pickUpCoordinate,place:\"From \".concat(myOrigin)}),/*#__PURE__*/_jsx(Marker,{position:{lat:lat-0.0015,lng:lng-0.0015},options:{icon:{// url: 'https://www.uttf.com.ua/assets/images/loader2.gif',\n// url: 'https://github.com/EfficientProgramming01/uberClone/blob/master/assets/carMarker.png?raw=true',\nurl:'https://d1a3f4spazzrp4.cloudfront.net/car-types/map70px/product/map-uberx.png',scaledSize:new google.maps.Size(25,25)}}})]})}),/*#__PURE__*/_jsx(FormCard,{heading:\"Where to?\"})]});};export default Pick;","map":{"version":3,"names":["React","useEffect","useParams","useMediaPredicate","axios","GoogleMap","useJsApiLoader","Marker","mapStyle","GOOGLE_API_KEY","InfoComponent","updatePickup","updatePickupDisable","updatePickupCoordinates","useAppDispatch","useAppSelector","FormCard","Header","jsx","_jsx","jsxs","_jsxs","Pick","dispatch","_useParams","origin","myOrigin","split","pickUpCoordinate","state","root","pickup","coordinates","_useJsApiLoader","googleMapsApiKey","concat","isLoaded","mount","getCoordinate","address","method","headers","then","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","res","result","position","wrap","_callee$","_context","prev","next","data","sent","results","geometry","location","t0","console","log","stop","_x","apply","arguments","biggerScreen","lat","lng","children","className","id","mapContainerStyle","width","height","center","zoom","options","streetViewControl","fullscreenControl","mapTypeControl","styles","clickableIcons","zoomControl","clickable","icon","url","scaledSize","google","maps","Size","place","heading"],"sources":["/Users/binarybeast/uber-clone/src/Pages/pick/index.tsx"],"sourcesContent":["import React,{useEffect} from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport  {useMediaPredicate} from 'react-media-hook';\nimport axios from \"axios\";\nimport  { GoogleMap, useJsApiLoader, Marker} from '@react-google-maps/api';\nimport { mapStyle } from \"../../Component/map/mapStyle\";\nimport { GOOGLE_API_KEY } from \"../../Component/const/api\";\nimport InfoComponent from \"../../Component/map/infoComponent\";\nimport { updatePickup, updatePickupDisable, updatePickupCoordinates } from \"../../Store/slice\";\nimport { useAppDispatch, useAppSelector } from \"../../Store/hooks\";\nimport FormCard from \"../../Component/formCard\";\nimport Header from \"../../Component/header\";\n\n\nconst Pick = () => {\n const dispatch = useAppDispatch();\n const {origin} = useParams();\n const myOrigin = origin.split(\",\")[0];\n const pickUpCoordinate = useAppSelector(state => state.root.pickup.coordinates);\n\n const { isLoaded} = useJsApiLoader({\n  googleMapsApiKey: `${GOOGLE_API_KEY}`\n}) \n\n\n  useEffect(() => {\n    let mount = true;\n    if(mount){\n      dispatch(updatePickup(myOrigin));\n      dispatch(updatePickupDisable(true));\n      const  getCoordinate = (address:string,) => {\n        axios(`https://maps.googleapis.com/maps/api/geocode/json?address=${address}&key=${GOOGLE_API_KEY}`, {\n          method: \"GET\",\n          headers: {\n            \"Content-Type\": \"application/json\"\n          }\n        })\n        .then(async res => {\n          try {\n            const result = await res.data;\n          const position =  await result.results[0].geometry.location;   \n           dispatch(updatePickupCoordinates(position));\n          }\n          catch (error) {\n            console.log(error);\n          }\n        })\n      }\n      getCoordinate(origin);\n    }\n    return () => {\n      dispatch(updatePickup(\"\"));\n      dispatch(updatePickupDisable(false));\n      mount = false;  \n    }\n  }, [ dispatch,  origin, myOrigin])\n\n  const  biggerScreen = useMediaPredicate('(min-width: 640px)');\n\n  const {lat, lng} = pickUpCoordinate;\n\n  if(!isLoaded) {\n    return <div>\n    </div>\n  }\n  \n  return (\n    <div>\n      <Header/>\n      <div className={` bg-gray-300  h-[45vh] sm:h-screen w-full`}>\n        <GoogleMap\n          id='map'\n          mapContainerStyle={{width: '100%', height: '100%'}}\n          center={pickUpCoordinate}\n          zoom={14}\n          options = {{\n            streetViewControl: false,\n            fullscreenControl: false,\n            mapTypeControl: false,\n            styles: mapStyle,\n            clickableIcons: false,\n            zoomControl: biggerScreen? true: false,\n          }}>  \n          <Marker\n            clickable={false}\n            position={pickUpCoordinate}\n            options  = {{\n              icon: {\n                url: 'https://www.picng.com/upload/vinyl/png_vinyl_35563.png',\n                scaledSize: new google.maps.Size(18, 18), \n              },  \n            }}\n          />\n          <InfoComponent\n            center = {pickUpCoordinate}\n            place  = {`From ${myOrigin}`}\n          />\n          <Marker   \n            position={\n              {\n                lat: lat - 0.0015,\n                lng: lng - 0.0015\n              }\n\n            }\n              options = {{\n                icon: {\n                  // url: 'https://www.uttf.com.ua/assets/images/loader2.gif',\n                  // url: 'https://github.com/EfficientProgramming01/uberClone/blob/master/assets/carMarker.png?raw=true',\n                  url: 'https://d1a3f4spazzrp4.cloudfront.net/car-types/map70px/product/map-uberx.png',\n                  scaledSize: new google.maps.Size(25, 25), \n                }  \n              }}\n            />\n          </GoogleMap>\n        </div>\n      <FormCard\n        heading=\"Where to?\"\n      />\n    </div>\n  )\n}\n\nexport default Pick;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}